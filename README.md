# Телеграм бот для заказа кофе

## Библиотеки
Используемый api - chatgptapi  
Для заказа кофе - telegram-web-apps  
Оплата - ЮMoney  
Orm - Sqlalchemy
telegram-api - aiogram3

## Использование
### Quick start
Для получения токена для вашего Telegram-бота вы можете использовать BotFather. Это специальный бот, созданный разработчиками Telegram, который помогает создавать и управлять другими ботами. Вот шаги, которые вам нужно выполнить:

- Начните диалог с BotFather, отправив ему команду /newbot.
 - Следуйте инструкциям BotFather, чтобы задать имя и имя пользователя для вашего нового бота.
 - После того как вы установили имя и имя пользователя, BotFather предоставит вам токен для вашего бота. Это уникальный ключ, который позволяет боту взаимодействовать с Telegram API.
Пример возможного токена: ```123456:ABC-DEF1234*token-example*v1u123ew11```

После того как вы получили свой токен, вам нужно добавить его в ваш .env файл в формате ```BOT_TOKEN=Ваш_токен```. Это необходимо для того, чтобы ваш код мог безопасно обращаться к API Telegram с использованием этого токена.

Пример содержимого вашего .env файла может выглядеть так:
```
BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
```
Далее возвращаемся к BotFather’у, даем команду /mybots и выбираем из списка своего бота.

В открывшемся меню кликаем на кнопку «Payments». Из предоставленного списка выбираем нужный платежный шлюз и следуем инструкциям бота. 
Далее возвращаемся к коду и вставляем в .env файл токен таким образом:
```
PAYMENT_TOKEN=Ваш_токен
```
И запускаем.
```
pip install -r req.txt
python3 main.py
```
## Структура
В базе данных есть 5 таблиц:  
- History - для хранения всех заказов пользователей
- Adresses - список адресов. У каждого адреса есть свой id.
- AdminInfo для хранения информаций об админах. У каждого админа есть свой адрес где он работает и телеграм id куда ему будет приходить заказы. 
- Items - для хранения продаваемых продуктов. У каждого продукта есть свой id, top - сколько раз заказали этот продукт(для подсчета самого популярного продукта), имя и цена.
- Orders - список заказов. У каждого заказа есть свой id, телеграм id заказчика, сам заказ ввиде текста и адрес где заказчик заказывал.

## Описание

SkuratovCoffee - это удобный бот для заказа кофе в городе Казань. С помощью бота вы можете легко и быстро оформить заказ кофе, выбрав из широкого ассортимента напитков.

### Команды бота для юзеров
/start - приветственное сообщение
/help - справка
/history - история запросов
/low - самый недорогой напиток или снек
/high - самый популярный напиток или снек
/custom - подобрать товар
/order - сделать заказ
### Команды админа
/addadmin - добавление нового админа
Пример: /addadmin 889333890 (где 889333890 это telegram chat id нового админа)
/addressesid - список адресов наших кофейнь с их id
/complorder - отметить заказ как завершенный
Пример: /complorder 1 (завершить заказ с id 1)